name: Github Pages Astro CI
on:
# Trigger this "workflow" every time you push to the `main` branch
# If you are using another branch name, replace `main` with your branch name as needed
push:
branches: [ main ]
# Allows you to manually trigger this "workflow" in the Actions tab on GitHub
workflow_dispatch:
# Allow the job to clone the repo and create a page deployment
permissions:
contents: read
pages: write
id-token: write
jobs:
build:
runs-on: ubuntu-latest
steps:
- name: Checkout your repository using git
uses: actions/checkout@v3
- name: Install, build, and upload your site
uses: withastro/action@v0
deploy:
needs: build
runs-on: ubuntu-latest
environment:
name: github-pages
url: ${{ steps.deployment.outputs.page_url }}
steps:
- name: Deploy to GitHub Pages
id: deployment
uses: actions/deploy-pages@v1